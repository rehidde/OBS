<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OBS | Mesajlaşma Sistemi</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="/css/messaging.css"> 
</head>
<body>

    <div class="sayfa-konteyner">
        <div id="user-info" class="user-info card-kutu"></div>
        
        <aside class="sol-menu">
            <div class="menu-baslik">
                <i class="fas fa-university"></i> OBS
            </div>
            <nav>
                <a href="/notes.html"><i class="fas fa-file-alt"></i> Not Yönetim Sistemi</a>
                <a href="/messaging.html" class="aktif-menu"><i class="fas fa-comments"></i> Mesajlaşma Sistemi</a>
            </nav>
        </aside>

        <main class="icerik">
            <section id="mesajlasma" class="ana-modul">
                <h2>MESAJLAŞMA SİSTEMİ</h2>

                <div class="mesaj-arayuzu">

                    <div class="sohbet-filtresi">
                        <a href="#" class="sohbet-filtre-linki aktif-filtre" data-kanal="fakulte">Fakülte</a>
                        <a href="#"class="sohbet-filtre-linki" data-kanal="bolumum">Bölümüm</a>
                        <a href="#" class="sohbet-filtre-linki" data-kanal="tumokul">Okul</a>
                    </div>

                    <div class="aktif-sohbet-penceresi">

                        <div class="mesajlar" data-aktif-kanal="fakulte">
                           
                           <% sohbetVerileri.fakulte.forEach(function(mesaj) { %>
                               <div class="mesaj-kart kart">
                                    <div class="mesaj-profil-bar">
                                        <span><%= mesaj.gonderen.ad_soyad %> (<%= mesaj.gonderen.numara %>)</span>
                                        <span><%= mesaj.gonderen.email %></span>
                                    </div>
                                    <p class="mesaj-icerik"><%= mesaj.icerik %></p>
                                    <span class="mesaj-zaman"><%= mesaj.tarih %></span>
                               </div>
                           <% }); %>
                        </div>
                        <div class="mesaj-yazma-alani">
                            <% // 'aktifKullanici' objesi Kullanici tablosundan çekilecek varsayıldı %>
                            <% if (aktifKullanici.rol === 'ogrenci') { %>
                                <input type="text" id="mesaj-input" placeholder="Yalnızca Bölüm ve Okul kanallarına yazabilirsiniz..." disabled>
                                <button class="buton-gonder" disabled>Gönder</button>
                            <% } else { %>
                                <input type="text" id="mesaj-input" placeholder="Bir mesaj yazın...">
                                <button class="buton-gonder">Gönder</button>
                            <% } %>
                        </div>

                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="/js/js_msgnotes.js"></script>
</body>
</html>
